- [值参数化测试](#值参数化测试)
  - [使用方法](#使用方法)


# 值参数化测试

在 Google Test（GTest）中，Value-Parameterized Tests（值参数化测试） 是一种强大的功能，允许你用多组不同的输入数据来运行同一套测试逻辑，避免编写重复代码。这在需要对多个相似输入进行验证时非常有用（例如测试不同边界值、等价类等）。

核心思想是将测试逻辑与输入数据分离：
* 定义一套通用的测试逻辑（测试用例）。
* 提供多组输入参数，让测试框架自动用每组参数执行一次测试逻辑。


## 使用方法

想要使用值参数化
* 就需要定义一个fixture类，它必须继承自```testing::TestWithParam<T>```
* 测试逻辑需要使用```TEST_P```
* 测试参数传入需要使用```INSTANTIATE_TEST_SUITE_P ```注册

```INSTANTIATE_TEST_SUITE_P ```使用方法如下：

```C++
INSTANTIATE_TEST_SUITE_P(
    实例名称（自定义，用于区分不同参数集）,
    测试类名,
    参数生成器（提供测试参数的集合）
);
```
常用的参数生成器：

* ```testing::Values(v1, v2, ...)```：直接指定参数列表。
* ```testing::Range(start, end, step)```：生成一个范围的参数（左闭右开）。
* ```testing::ValuesIn(容器)```：从 STL 容器（如 vector、array）中获取参数。

例子：
```C++
class TestValParam : public testing::TestWithParam<std::tuple<int, int, bool>>{};


TEST_P(TestValParam, tvp)
{
    const std::tuple<int, int, bool>& parm = GetParam();

    GTEST_LOG_(INFO)
          << "a:"<< std::get<0>(parm)<< " b:"<< std::get<0>(parm)<< " eq:"<< std::get<2>(parm);
}

INSTANTIATE_TEST_SUITE_P(
    MyValueParamterize,
    TestValParam,
    testing::Combine(
        testing::Values(1, 2, 3),
        testing::Values(1, 2, 3),
        testing::Values(true, false)  // 注意：此处无多余逗号
    )
);

```

```testing::Combine```通过参数组合方式得到多种参数集合传入测试函数中